<!DOCTYPE html>
<html lang="en">
<head>
  <title>WS Validation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <script type='text/javascript' src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js'></script>

  <!-- SEMANTIC UI CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css">
  <!-- HITPUB CSS -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style id="hitpub_css">
    body {
      font-family: "Open Sans", "Roboto", sans-serif;
      line-height: 1.5;
      font-size: 1.1rem;
    }

    li {
      margin: 0.6em;
    }

    .mt-1 {
      margin-top: 1rem!important;
    }

    .mt-2 {
      margin-top: 2rem!important;
    }

    .mb-1 {
      margin-bottom: 1rem!important;
    }
    
    .ui.form {
      font-size: 1.1rem;
    }

    .concept_a {
      color: #0072B2;
      font-weight: bold;
      font-style: italic;
    }
    
    .concept_b {
      color: #D55E00;
      font-weight: bold;
      font-style: italic;
    }

    .concept_c {
      border: 1px solid black;
      background-color: #fff8db;
      border-radius: 5px;
      padding: 1px 3px;
      font-weight: bold;
    }

    .concept_d {
      border: 1px solid black;
      background-color: #FF9800;
      border-radius: 5px;
      padding: 1px 3px;
      font-weight: bold;
    }
    
    .kg-relation {
      border-radius: 5px;
      font-family: Inconsolata;
      font-size: 1.1rem;
      background-color: #FF9800;
      padding: 5px 5px;
      font-weight: bold;
      line-height: 1.8;
    }

    .kg-head, .kg-tail {
      border-radius: 5px;
      font-family: Inconsolata;
      font-size: 1.1rem;
      background-color: #FFF3E0;
      padding: 3px 5px;
    }

    .annotation-title {
      text-align: center;
      color: #06486F;
      padding-top: 3rem;
    }

    .annotation-subtitle {
      text-align: center;
      color: #D55E00
    }
    
    .ui.message .header {
      font-size: 1.2rem;
    }

    .ui.message .description {
      font-family: Inconsolata;
      font-size: 1.2rem;
      color: #06486F;
    }
  
    .highlight {
      background-color: yellow;
    }
    
    .text-detail {
      color: grey;
    }
  
    .add-btn-container {
      text-align: end;
    }

    .ui.styled.accordion .title {
      padding: 2rem 1rem;
      font-size: 1.5rem;
      background-color: cornflowerblue;
      color: white;
    }

    .ui.accordion .content {
      background-color:#fbfbfb;
    }

    .ui.message .subheader {
      font-weight: bold;
      font-size: 1.1rem;
      color: darkblue;
    }
  </style>
</head>
<body>
<!-- HIT START -->
<div id="hit" class="ui container">

  <div class="ui grid">
    <div class="row">
      <div class="column">
        <h1 class="annotation-title">
          <strong>Safe/Unsafe Action Validation</strong>
        </h1>
      </div>
    </div>
    <div class="row">
      <div class="column">

        <!-- ACCORDION START -->
        <div class="ui styled fluid accordion">

          <!-- POLICY START -->
          <div class="title">
            <strong>Acceptance and Privacy Policies</strong> (click to expand/collapse)
          </div>
          <div class="content">
            <h5>Acceptance Policy</h5>
            <p>There is no obligation to participate in the task. We will not reject a job unless we observe the evidence of malicious behavior, such as random clicks or very short session times.</p>

            <h5>Privacy Policy</h5>
            <p>We may incidentally collect some personal data for the purpose of our research project, according to art. 36c and seq. of the ETH Act. Our target is to process and publish only anonymized data. Raw data will be kept confidential and secure. Only anonymized or aggregated personal data may be shared with other research partners.</p>
            <p>Having established this, however, we should not collect any personal data in this task.</p>
            <p>We are using the services of Amazon Mechanical Turk, Inc. and its affiliates, c/o Amazon.com, Inc., P.O. Box 81226, Seattle, WA 98108-1226, USA. Hence, the privacy policy of Amazon will apply for the processing of your personal information by Amazon.</p>
            <p>If you wish to raise a complaint on how we have handled your personal data, or if you want to know if we hold personal data about you, you can contact our Data Protection Officer (dpo@epfl.ch) who will investigate the matter.</p>
          </div>
          <!-- POLICY END -->

          <!-- INSTRUCTIONS START -->
          <div class="active title">
            <strong>Instructions</strong> (click to expand/collapse)
          </div>
          <div class="active content">
            <p style="font-size: 12px; margin:0 0 0.5em 0;"><em>(WARNING: This HIT may contain adult content. Worker discretion is advised.)</em></p>

            <p>Thanks for participating in this HIT!</p>

            <div class="ui divider"></div>
            <p>Given an example consisting of a <strong>real-life scenario</strong>, a <strong>safe or unsafe action</strong> for this scenario, a list of <strong>commonsense knowledge</strong> instances that describe why the given action might be safe or unsafe and a list of (potentially safe/unsafe) actions, you are asked to <strong>select</strong> those actions that satisfy the following conditions:
              <ol>
                <li><strong class="concept_a">minimally</strong> differs from the given action</li>
                <li><strong class="concept_b">is based on</strong> your given commonsense knowledge options</li>
                <li><strong class="concept_b">flips</strong> the safety value of the given action with respect to the given scenario (i.e. is unsafe if the given action is safe and vice-versa)</li>
                <li>its safety value <strong class="concept_a">depends</strong> on the given scenario (i.e. it is not safe/unsafe in all scenarios independent of the scenario)</li>
              </ol>
            </p>
            <p><strong>Commonsense knowledge</strong> consists of <span class="concept_a">implicit</span> and <span class="concept_b">commonly known</span> facts about the everyday life such as <i>"Lemons are sour"</i> or <i>"If someone is hungry, then they would like to eat."</i>. It is a type of knowledge that nearly <strong>everyone knows</strong> intuitively and considers obvious, but is typically <span class="concept_a">implicit</span> which means it is rarely stated explicitly in text. For example, encyclopedic facts such as <i>"Ottawa is the capital of Canada"</i> are <span style="color: red">not</span> considered commonsense knowledge because this information can be explicitly found online (e.g. Wikipedia) and not necessarily everyone knows it.</p>
            <p>An example could be the following:</p>
            <div class="ui yellow message">
              <div class="header">Example</div><br>
              <span class="subheader">Scenario</span><br>
              <div class="description">
                <span>If you're being chased by a hungry animal</span><br><br>
              </div>
              <span class="subheader">Safe Action</span><br>
              <div class="description">
                <span>get in a building and close the door.</span><br>
              </div>
              <br>
            </div>
            <p>An example of a list of commonsense knowledge instances explaining why this action is safe:</p>
            <p><span class="kg-relation"><span class="kg-head">building</span>&nbsp;HasProperty&nbsp;<span class="kg-tail">safe spot</span></span></p></p>
            <p><span class="kg-relation"><span class="kg-head">close the door</span>&nbsp;CapableOf&nbsp;<span class="kg-tail">blocking animal</span></span></p>
            <p>Finally, an example of list of (potentially unsafe) actions that you could be given:</p>
            <div class="ui checkbox">
              <input type="checkbox" readonly checked>
              <label>1. <strong>find</strong> a building and close <strong class="highlight">your eyes.</strong></label>
            </div>
            <br><br>
            <div class="ui checkbox">
              <input type="checkbox" readonly>
              <label>2. get in a building and <strong class="highlight">lock</strong> the door</label>
            </div>
            <br><br>
            <div class="ui checkbox">
              <input type="checkbox" readonly>
              <label>3. find a spot where animal can get to you</label>
            </div>
            <br><br>
            <div class="ui checkbox">
              <input type="checkbox" readonly>
              <label>4. get in a <strong style="color: red">burning</strong> building and close the door.</label>
            </div>
            <br><br>
            <p>Given all the above, your task is to select the actions that satisfy the conditions given above. In other words, you need to select the action(s) that are <strong>deceptively close</strong> (hard to differentiate from) to the original one, but nonetheless is the <strong class="concept_b">opposite</strong> of the given action in terms of safety for the given scenario.</p>
            <p>We can see that in the example above, <strong>option 1</strong> only should be selected as it satisfies the conditions.</p>
            <p><strong>Option 2</strong> should <strong style="color: red">NOT</strong> be selected because it is a stronger version of the given action, so it is still safe. It does not satisfy condition 3.</p>
            <p><strong>Option 3</strong> should <strong style="color: red">NOT</strong> be selected because although it is unsafe, it is significantly different from the given action, hence does not satisfy the condition 1.</p>
            <p><strong>Option 4</strong> should <strong style="color: red">NOT</strong> be selected because it is unsafe <strong class="concept_b">independent</strong> of the given scenario (i.e. getting in a burning building and closing the door is almost always unsafe!)</p>
            <p>If you think that <strong>none of the given options</strong> satisfy the conditions, then you are given an option to indicate this and <strong>make your own suggestions.</strong></p>
            <p>If there is something wrong with the headline or the given options, then please leave a feedback and we will take a look at it.</p>
            <h3>Knowledge Relations</h3>
            <p>Below we list the available commonsense relations with a brief description and an example. Each relationship is represented as <span class="kg-relation"><span class="kg-head">A</span>&nbsp;Relation&nbsp;<span class="kg-tail">B</span></span> where <span class="kg-head">A</span> and <span class="kg-head">B</span> refer to phrases from the context.</p>
            <strong>Attributional Relations</strong>
            <ul>
              <li>
                <span class="kg-relation">HasProperty</span> - A has B as a property; A can be described as B. e.g. <span class="kg-relation"><span class="kg-head">trial</span>&nbsp;HasProperty&nbsp;<span class="kg-tail">free of charge</span></span>
              </li>
              <li>
                <span class="kg-relation">CapableOf</span> - Something that A can typically do is B. e.g. <span class="kg-relation"><span class="kg-head">knife</span>&nbsp;CapableOf&nbsp;<span class="kg-tail">cut</span></span>
              </li>
              <li>
                <span class="kg-relation">HasA</span> - B belongs to A, either as an inherent part or due to a social construct of possession. e.g. <span class="kg-relation"><span class="kg-head">bird</span>&nbsp;HasA&nbsp;<span class="kg-tail">wing</span></span>
              </li>
              <li>
                <span class="kg-relation">HasSubEvent</span> - A and B are events, and B happens as a subevent of A. e.g. <span class="kg-relation"><span class="kg-head">eating</span>&nbsp;HasSubEvent&nbsp;<span class="kg-tail">chewing</span></span>
              </li>
              <li>
                <span class="kg-relation">IsA</span> - A is a subtype or a specific instance of B; every A is a B. e.g. <span class="kg-relation"><span class="kg-head">car</span>&nbsp;IsA&nbsp;<span class="kg-tail">vehicle</span></span>
              </li>
              <li>
                <span class="kg-relation">MannerOf</span> - A is a specific way to do B. Similar to "Is A", but for verbs. e.g. <span class="kg-relation"><span class="kg-head">auction</span>&nbsp;MannerOf&nbsp;<span class="kg-tail">sale</span></span>
              </li>
              <li>
                <span class="kg-relation">DependsOn</span> - A depends on B. e.g. <span class="kg-relation"><span class="kg-head">postage</span>&nbsp;DependsOn&nbsp;<span class="kg-tail">weight of the box</span></span>
              </li>
              <li>
                <span class="kg-relation">CreatedBy</span> - A is created by B. e.g. <span class="kg-relation"><span class="kg-head">space rockets</span>&nbsp;CreatedBy&nbsp;<span class="kg-tail">scientists and engineers</span></span>
              </li>
            </ul>
            <strong>Physical/Spatial Relations</strong>
            <ul>
              <li>
                <span class="kg-relation">UsedFor</span> - A is used for B. The purpose of A is B. e.g. <span class="kg-relation"><span class="kg-head">hammer</span>&nbsp;UsedFor&nbsp;<span class="kg-tail">put nails in the wall</span></span>
              </li>
              <li>
                <span class="kg-relation">PartOf</span> - A is part of B. e.g. <span class="kg-relation"><span class="kg-head">word</span>&nbsp;PartOf&nbsp;<span class="kg-tail">sentence</span></span>
              </li>
              <li>
                <span class="kg-relation">MadeOf</span> - A is made up of B. e.g. <span class="kg-relation"><span class="kg-head">crowd</span>&nbsp;MadeOf&nbsp;<span class="kg-tail">people</span></span>
              </li>
              <li>
                <span class="kg-relation">AtLocation</span> - A happens at location B, or B is a typical location for A. e.g. <span class="kg-relation"><span class="kg-head">try clothes</span>&nbsp;AtLocation&nbsp;<span class="kg-tail">changing rooms</span></span>
              </li>
              <li>
                <span class="kg-relation">LocatedNear</span> - A and B are typically found near each other. e.g. <span class="kg-relation"><span class="kg-head">salt shaker</span>&nbsp;LocatedNear&nbsp;<span class="kg-tail">pepper shaker</span></span>
              </li>
            </ul>
            <strong>Temporal Relations</strong>
            <ul>
              <li>
                <span class="kg-relation">IsAfter</span> - A happens after B. e.g. <span class="kg-relation"><span class="kg-head">PersonX lands on the ground</span>&nbsp;IsAfter&nbsp;<span class="kg-tail">PersonX jumps off of the swing</span></span>
              </li>
              <li>
                <span class="kg-relation">IsBefore</span> - A happense before B. e.g. <span class="kg-relation"><span class="kg-head">PersonX calls the bank</span>&nbsp;IsBefore&nbsp;<span class="kg-tail">PersonX asks for a car loan</span></span>
              </li>
              <li>
                <span class="kg-relation">HappensIn</span> - A happens during B. e.g. <span class="kg-relation"><span class="kg-head">gift exchange</span>&nbsp;HappensIn&nbsp;<span class="kg-tail">Christmas party</span></span>
              </li>
              <li>
                <span class="kg-relation">IsSimultaneous</span> - A and B happens at the same time. e.g. <span class="kg-relation"><span class="kg-head">dancing</span>&nbsp;IsSimultaneous&nbsp;<span class="kg-tail">music playing</span></span>
              </li>
              <li>
                <span class="kg-relation">HasPrerequisite</span> - In order for A to happen, B needs to happen. e.g. <span class="kg-relation"><span class="kg-head">dream</span>&nbsp;HasPrerequisite&nbsp;<span class="kg-tail">sleep</span></span>
              </li>
            </ul>
            <strong>Causal Relations</strong>
            <ul>
              <li>
                <span class="kg-relation">Causes</span> - A causes B to happen. e.g. <span class="kg-relation"><span class="kg-head">been late for my meetings</span>&nbsp;Causes&nbsp;<span class="kg-tail">lost some important clients</span></span>
              </li>
              <!-- <li>
                <span class="kg-relation">CausesDesire</span> - A makes someone want B. e.g. <span class="kg-relation"><span class="kg-head">having no food</div>&nbsp;CausesDesire&nbsp;<span class="kg-tail">buy food</div></div>
              </li> -->
              <li>
                <span class="kg-relation">Implies</span> - A implies B. e.g. <span class="kg-relation"><span class="kg-head">wet cloth</span>&nbsp;Implies&nbsp;<span class="kg-tail">caught in rain</span></span>
              </li>
              <li>
                <span class="kg-relation">HinderedBy</span> - A is less likely to happen because of B. e.g. <span class="kg-relation"><span class="kg-head">PersonX gives PersonY a ride</span>&nbsp;HinderedBy&nbsp;<span class="kg-tail">PersonX does not have a car</span></span>
              </li>
              <!-- <li>
                <span class="kg-relation">xReason</span> - A happens because of B. This is the same relation as <span class="kg-relation">Causes</div>, but in the opposite direction. e.g. <span class="kg-relation"><span class="kg-head">stay up late</span>&nbsp;xReason&nbsp;<span class="kg-tail">cannot sleep</span></span>
              </li> -->
            </ul>
            <strong>Social Relations</strong>
            <ul>
              <!-- <li>
                <span class="kg-relation">xAttr</span> - Person in event A has the attribute B. e.g. <span class="kg-relation"><span class="kg-head">PersonX calls the police</span>&nbsp;xAttr&nbsp;<span class="kg-tail">lawful</span></span>
              </li> -->
              <li>
                <span class="kg-relation">xIntent</span> - Person in event A intends to do B. e.g. <span class="kg-relation"><span class="kg-head">PersonX calls the police</span>&nbsp;xIntent&nbsp;<span class="kg-tail">report crime</span></span>
              </li>
              <li>
                <span class="kg-relation">xReact</span> - Person in event A reacts as in B. e.g. <span class="kg-relation"><span class="kg-head">PersonX makes a compliment</span>&nbsp;xReact&nbsp;<span class="kg-tail">feels good</span></span>
              </li>
              <li>
                <span class="kg-relation">xNeed</span> - Person in event A needs to do B before doing A. e.g. <span class="kg-relation"><span class="kg-head">PersonX calls the police</span>&nbsp;xNeed&nbsp;<span class="kg-tail">dial 911</span></span>
              </li>
              <li>
                <span class="kg-relation">xWant</span> - Person in event A wants to do B. e.g. <span class="kg-relation"><span class="kg-head">PersonX calls the police</span>&nbsp;xWant&nbsp;<span class="kg-tail">explain everything to police</span></span>
              </li>
              <li>
                <span class="kg-relation">xEffect</span> - Event A will have the effect B on the Person in event A. e.g. <span class="kg-relation"><span class="kg-head">PersonX calls the police</span>&nbsp;xEffect&nbsp;<span class="kg-tail">starts to panic</span></span>
              </li>
              <li>
                <span class="kg-relation">oReact</span> - Others will react to event A as B. e.g. <span class="kg-relation"><span class="kg-head">PersonX calls the police</span>&nbsp;oReact&nbsp;<span class="kg-tail">feel worried</span></span>
              </li>
              <li>
                <span class="kg-relation">oWant</span> - Others will want to do B for A. e.g. <span class="kg-relation"><span class="kg-head">PersonX calls the police</span>&nbsp;oWant&nbsp;<span class="kg-tail">dispatch some officers</span></span>
              </li>
              <li>
                <span class="kg-relation">oEffect</span> - Event A will have effect B on others. e.g. <span class="kg-relation"><span class="kg-head">PersonX makes a compliment to PersonY</span>&nbsp;oEffect&nbsp;<span class="kg-tail">PersonY will smile</span></span>
              </li>
              <!-- <li>
                <span class="kg-relation">Desires</span> - Person in A typically wants B. e.g. <span class="kg-relation"><span class="kg-head">animal</span>&nbsp;Desires&nbsp;<span class="kg-tail">reproduction</span></span>
              </li> -->
              <li>
                <span class="kg-relation">MotivatedByGoal</span> - Someone does A because they want result B. e.g. <span class="kg-relation"><span class="kg-head">PersonX competes</span>&nbsp;MotivatedByGoal&nbsp;<span class="kg-tail">PersonX wins</span></span>
              </li>
            </ul>
            <strong>Comparative Relations</strong>
            <ul>
              <li>
                <span class="kg-relation">Antonym</span> - A and B are opposites in some relevant way. e.g. <span class="kg-relation"><span class="kg-head">a lot</span>&nbsp;Antonym&nbsp;<span class="kg-tail">occasionally</span></span>
              </li>
              <li>
                <span class="kg-relation">Synonym</span> - A and B have very similar meanings. e.g. <span class="kg-relation"><span class="kg-head">blackout</span>&nbsp;Synonym&nbsp;<span class="kg-tail">lights are out</span></span>
              </li>
              <li>
                <span class="kg-relation">SimilarTo</span> - A is similar to B. e.g. <span class="kg-relation"><span class="kg-head">mixer</span>&nbsp;SimilarTo&nbsp;<span class="kg-tail">food processor</span></span>
              </li>
              <li>
                <span class="kg-relation">DistinctFrom</span> - Something that is A is not B. e.g. <span class="kg-relation"><span class="kg-head">stay home</span>&nbsp;DistinctFrom&nbsp;<span class="kg-tail">go dancing</span></span>
              </li>
              <li>
                <span class="kg-relation">RelatedTo</span> - A is related to B. e.g. <span class="kg-relation"><span class="kg-head">refrigerator</span>&nbsp;RelatedTo&nbsp;<span class="kg-tail">freezing</span></span>
              </li>
              <li>
                <span class="kg-relation">DefinedAs</span> - A is defined as B. e.g. <span class="kg-relation"><span class="kg-head">gym</span>&nbsp;DefinedAs&nbsp;<span class="kg-tail">fine exercise facility</span></span>
              </li>
            </ul>
            <strong>Other Relations</strong>
            <ul>
              <li>
                <span class="kg-relation">Other</span> - A and B have some other relationship that is not listed here. In this case, please provide a description of the relationship in the <i>"Other relation"</i> field.
              </li>
            </ul>
            <p>In addition, there are negative relations which are the opposite of the relations above. For example, <span class="kg-relation"><span class="kg-head">A</span>&nbsp;Not xWant&nbsp;<span class="kg-tail">B</span></span> means that the person in event A does NOT want to do B.</p>
          </div>
          <!-- INSTRUCTIONS END -->

          <!-- DOS/DONTS START -->
          <div class="title">
            <strong>Dos and Don'ts</strong> (click to expand/collpase)
          </div>
          <div class="content">
            <p class="mb-2"><b>Important notes to consider:</b></p> 
            <p style="font-size: 12px;"><em>Note, there are many other considerations, but these are the most important.</em></p>
            <ul>
              <li><strong>Make sure the new action is minimally different from the original action!</strong> This typically means changing very few words or switching the words in place in the sentence. Please see <i>Examples</i> section for some potential examples of minimal perturbation.</li>
              <li><strong>Make sure the new action <span class="concept_b">is based on</span> the chosen commonsense knowledge.</strong> This means that your change should directly target the chosen commonsense knowledge for the given scenario.</li>
              <li><strong>Make sure the new action is the <span style="color: red">opposite</span> action in terms of safety for the given scenario.</strong> This means that your minimal change should produce an action which is safe if the original one is unsafe and vice-versa.</li>
              <li><strong>Make sure the new action is not always safe or unsafe independent of the given scenario!</strong></li>
            </ul>
          </div>
          <!-- DOS/DONTS END -->

          <!-- EXAMPLES START -->
          <div class="title">
            <strong>Examples</strong> (click to expand/collapse)
          </div>
          <div class="content">
            <div class="ui grid">
              
              <div class="row">
                <div class="column">
                  <h3>Example 1</h3>
                  <div class="ui yellow message">
                    <div class="header">Example</div><br>
                    <span class="subheader">Scenario</span><br>
                    <div class="description">
                      <span>If you can't afford a dentist</span><br><br>
                    </div>
                    <span class="subheader">Safe Action</span><br>
                    <div class="description">
                      <span>make sure your dental hygiene routine is impeccable</span>
                    </div>
                  </div>
                  <p><strong>Commonsense Knowledge</strong></p>
                  <p><span class="kg-relation"><span class="kg-head">unaffordable dentist</span>&nbsp;Causes&nbsp;<span class="kg-tail">good hygiene</span></span></p>
                  <div class="ui checkbox">
                    <input type="checkbox" readonly>
                    <label>make sure your dental hygiene routine is <strong>terrible</strong> <strong style="color: red">(always unsafe, does not satisfy condition 4)</strong></label>
                  </div>
                  <br><br>
                  <div class="ui checkbox">
                    <input type="checkbox" readonly checked>
                    <label>make sure your dental hygiene is <strong>expensive</strong></label>
                  </div>
                  <br><br>
                  <div class="ui checkbox">
                    <input type="checkbox" readonly>
                    <label>Brush your teeth less often <strong style="color: red">(significantly different from the given action, does not satisfy condition 1)</strong></label>
                  </div>
                  <br><br>
                  <div class="ui checkbox">
                    <input type="checkbox" readonly>
                    <label>make sure your dental hygiene routine is great <strong style="color: red">(still safe, does not satisfy condition 3)</strong></label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- EXAMPLES END -->
        </div>
      </div>
    </div>
    <div class="row">
      <div class="column">
        <!-- MTURK INPUT START -->
        <form name='mturk_form' method='post' id='mturk_form' action="https://www.mturk.com/mturk/externalSubmit" class="ui form">
          <input type='hidden' value='' name='assignmentId' id='assignmentId'/>
          <input type='hidden' name='ee' id='ee'/>
          <span hidden>${id}</span>
  
          <!-- QUESTION MACRO START -->          
          <h2><strong>Task</strong></h2>
          <p>Given an example consisting of a <strong>real-life scenario</strong>, a <strong>safe or unsafe action</strong> for this scenario, a list of <strong>commonsense knowledge</strong> instances that describe why the given action might be safe or unsafe and a list of (potentially safe/unsafe) actions, you are asked to <strong>select</strong> those actions that satisfy the following conditions:
            <ol>
              <li><strong class="concept_a">minimally</strong> differs from the given action</li>
              <li><strong class="concept_b">is based on</strong> your given commonsense knowledge options</li>
              <li><strong class="concept_b">flips</strong> the safety value of the given action with respect to the given scenario (i.e. is unsafe if the given action is safe and vice-versa)</li>
              <li>its safety value <strong class="concept_a">depends</strong> on the given scenario (i.e. it is not safe/unsafe in all scenarios independent of the scenario)</li>
            </ol>
          </p>
          <p>If <strong>none of the options</strong> satisfy the conditions, then tick the option <i>None of the above</i> and provide the action that you think satisfies the conditions (you can enter up to 3 and each additional correct annotation will be rewarded with a bonus)</p>
          <div class="ui yellow message">
            <div class="header">Example</div><br>
            <span class="subheader">Scenario</span><br>
            <div class="description">
              ${scenario}
            </div>
            <br>
            <span class="subheader" id="action-subheader">Action</span><br>
            <span hidden id="action-value">${action_value}</span>
            <div class="description" id="action-container">
              ${action}
            </div>
          </div>
          <h3>Commonsense Knowledge</h3>
          <p hidden id="ck-list">
            ${knowledge}
          </p>
          <div id="ck-list-container"></div>
          <h3>Actions</h3>
          <p><strong>Which of the following actions satisfy the conditions above?</strong> <span class="text-detail">(Select all that apply)</span></p>
          <p hidden id="ws-options">
            ${ws_options}
          </p>
          <div id="ws-options-container"></div>
          <br>
          <div class="ui grid" id="ws-suggestion-container">
            <div class="row">
              <div class="column">
                <p>Enter new action that you think satisfies the conditions above.</p>
              </div>
            </div>

            <div class="row" id="alt-target1-container">
              <div class="sixteen wide column">
                <div class="required field">
                  <label>Commonsense Knowledge</label>
                  <div id="alt-target1-ck-container" class="ui fluid search multiple selection clearable dropdown">
                    <input type="hidden" name="alt-target1-ck" id="alt-target1-ck">
                    <i class="dropdown icon"></i>
                    <div class="default text">Select Commonsense Knowledge</div>
                    <div class="menu"></div>
                  </div>
                  <div id="alt-target1-ck-error" class="ui pointing red basic label">
                    Please select a commonsense knowledge.
                  </div>
                </div>
              </div>
              <div class="sixteen wide column mt-1">
                <div class="required field">
                  <label id="alt-target1-label">Modified Action</label>
                  <textarea rows="2" name="alt-target1" id="alt-target1" placeholder="Write a minimally different action based on the given commonsense knowledge that is opposite in terms of safety."></textarea>
                </div>
              </div>
            </div>

            <div class="ui divider"></div>

            <div class="row" id="alt-target2-container">
              <div class="sixteen wide column">
                <div class="field">
                  <label>Commonsense Knowledge</label>
                  <div id="alt-target2-ck-container" class="ui fluid search multiple selection clearable dropdown">
                    <input type="hidden" name="alt-target2-ck" id="alt-target2-ck">
                    <i class="dropdown icon"></i>
                    <div class="default text">Select Commonsense Knowledge</div>
                    <div class="menu"></div>
                  </div>
                </div>
              </div>
              <div class="sixteen wide column mt-1">
                <div class="field">
                  <label id="alt-target2-label">Modified Action</label>
                  <textarea rows="2" name="alt-target2" id="alt-target2" placeholder="Write a minimally different action based on the given commonsense knowledge that is opposite in terms of safety."></textarea>
                </div>
              </div>
            </div>

            <div class="ui divider"></div>

            <div class="row" id="alt-target3-container">
              <div class="sixteen wide column">
                <div class="field">
                  <label>Commonsense Knowledge</label>
                  <div id="alt-target3-ck-container" class="ui fluid search multiple selection clearable dropdown">
                    <input type="hidden" name="alt-target3-ck" id="alt-target3-ck">
                    <i class="dropdown icon"></i>
                    <div class="default text">Select Commonsense Knowledge</div>
                    <div class="menu"></div>
                  </div>
                </div>
              </div>
              <div class="sixteen wide column mt-1">
                <div class="field">
                  <label id="alt-target3-label">Modified Action</label>
                  <textarea rows="2" name="alt-target3" id="alt-target3" placeholder="Write a minimally different action based on the given commonsense knowledge that is opposite in terms of safety."></textarea>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="thirteen wide column"></div>
              <div class="three wide column add-btn-container">
                <button class="ui secondary button" id="add-target-btn" type="button">
                  <i class="plus icon"></i>
                  Add Another
                </button>
              </div>
            </div>
          </div>
          
          <br>
          <div class="ui divider"></div>
          <br>

          <div class="ui grid">
            <!-- OPTIONAL FEEDBACK --> 
            <div class="centered row">
              <div class="eight wide column">
                <p>(Optional) Please let us know if anything was unclear, if you experienced any issues, or if you have any other feedback for us.</p>
                <textarea id="feedback" name="feedback" rows=3></textarea>
              </div>
            </div>
            <br>
            <!-- SUBMIT BUTTON --> 
            <div class="centered row">
              <div class="eight wide column" style="text-align: center">
                <input id="submitButton" onclick="getnext()" type="submit" class="ui primary button" value="Submit">
              </div>
            </div>
          </div>
        </form>
        <!-- MTURK INPUT END -->
        <script language='Javascript'>turkSetAssignmentID();</script>
      </div>
    </div>
  </div>
</div>
<!-- HIT END -->

<!-- BOOSTRAP JS -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
<!-- HITPUB JS -->
<script id="hitpub_js">
// TimeMe.js
(function () { var e, t; e = this, t = function () { var r = { startStopTimes: {}, idleTimeoutMs: 3e4, currentIdleTimeMs: 0, checkStateRateMs: 250, active: !1, idle: !1, currentPageName: "default-page-name", timeElapsedCallbacks: [], userLeftCallbacks: [], userReturnCallbacks: [], trackTimeOnElement: function (e) { var t = document.getElementById(e); t && (t.addEventListener("mouseover", function () { r.startTimer(e) }), t.addEventListener("mousemove", function () { r.startTimer(e) }), t.addEventListener("mouseleave", function () { r.stopTimer(e) }), t.addEventListener("keypress", function () { r.startTimer(e) }), t.addEventListener("focus", function () { r.startTimer(e) })) }, getTimeOnElementInSeconds: function (e) { var t = r.getTimeOnPageInSeconds(e); return t || 0 }, startTimer: function (e, t) { if (e || (e = r.currentPageName), void 0 === r.startStopTimes[e]) r.startStopTimes[e] = []; else { var n = r.startStopTimes[e], i = n[n.length - 1]; if (void 0 !== i && void 0 === i.stopTime) return } r.startStopTimes[e].push({ startTime: t || new Date, stopTime: void 0 }), r.active = !0, r.idle = !1 }, stopAllTimers: function () { for (var e = Object.keys(r.startStopTimes), t = 0; t < e.length; t++)r.stopTimer(e[t]) }, stopTimer: function (e, t) { e || (e = r.currentPageName); var n = r.startStopTimes[e]; void 0 !== n && 0 !== n.length && (void 0 === n[n.length - 1].stopTime && (n[n.length - 1].stopTime = t || new Date), r.active = !1) }, getTimeOnCurrentPageInSeconds: function () { return r.getTimeOnPageInSeconds(r.currentPageName) }, getTimeOnPageInSeconds: function (e) { var t = r.getTimeOnPageInMilliseconds(e); return void 0 === t ? void 0 : t / 1e3 }, getTimeOnCurrentPageInMilliseconds: function () { return r.getTimeOnPageInMilliseconds(r.currentPageName) }, getTimeOnPageInMilliseconds: function (e) { var t = r.startStopTimes[e]; if (void 0 !== t) { for (var n = 0, i = 0; i < t.length; i++) { var s = t[i].startTime, o = t[i].stopTime; void 0 === o && (o = new Date), n += o - s } return Number(n) } }, getTimeOnAllPagesInSeconds: function () { for (var e = [], t = Object.keys(r.startStopTimes), n = 0; n < t.length; n++) { var i = t[n], s = r.getTimeOnPageInSeconds(i); e.push({ pageName: i, timeOnPage: s }) } return e }, setIdleDurationInSeconds: function (e) { var t = parseFloat(e); if (!1 !== isNaN(t)) throw { name: "InvalidDurationException", message: "An invalid duration time (" + e + ") was provided." }; return r.idleTimeoutMs = 1e3 * e, this }, setCurrentPageName: function (e) { return r.currentPageName = e, this }, resetRecordedPageTime: function (e) { delete r.startStopTimes[e] }, resetAllRecordedPageTimes: function () { for (var e = Object.keys(r.startStopTimes), t = 0; t < e.length; t++)r.resetRecordedPageTime(e[t]) }, resetIdleCountdown: function () { r.idle && r.triggerUserHasReturned(), r.idle = !1, r.currentIdleTimeMs = 0 }, callWhenUserLeaves: function (e, t) { this.userLeftCallbacks.push({ callback: e, numberOfTimesToInvoke: t }) }, callWhenUserReturns: function (e, t) { this.userReturnCallbacks.push({ callback: e, numberOfTimesToInvoke: t }) }, triggerUserHasReturned: function () { if (!r.active) for (var e = 0; e < this.userReturnCallbacks.length; e++) { var t = this.userReturnCallbacks[e], n = t.numberOfTimesToInvoke; (isNaN(n) || void 0 === n || 0 < n) && (t.numberOfTimesToInvoke -= 1, t.callback()) } r.startTimer() }, triggerUserHasLeftPage: function () { if (r.active) for (var e = 0; e < this.userLeftCallbacks.length; e++) { var t = this.userLeftCallbacks[e], n = t.numberOfTimesToInvoke; (isNaN(n) || void 0 === n || 0 < n) && (t.numberOfTimesToInvoke -= 1, t.callback()) } r.stopAllTimers() }, callAfterTimeElapsedInSeconds: function (e, t) { r.timeElapsedCallbacks.push({ timeInSeconds: e, callback: t, pending: !0 }) }, checkState: function () { for (var e = 0; e < r.timeElapsedCallbacks.length; e++)r.timeElapsedCallbacks[e].pending && r.getTimeOnCurrentPageInSeconds() > r.timeElapsedCallbacks[e].timeInSeconds && (r.timeElapsedCallbacks[e].callback(), r.timeElapsedCallbacks[e].pending = !1); !1 === r.idle && r.currentIdleTimeMs > r.idleTimeoutMs ? (r.idle = !0, r.triggerUserHasLeftPage()) : r.currentIdleTimeMs += r.checkStateRateMs }, visibilityChangeEventName: void 0, hiddenPropName: void 0, listenForVisibilityEvents: function () { void 0 !== document.hidden ? (r.hiddenPropName = "hidden", r.visibilityChangeEventName = "visibilitychange") : void 0 !== document.mozHidden ? (r.hiddenPropName = "mozHidden", r.visibilityChangeEventName = "mozvisibilitychange") : void 0 !== document.msHidden ? (r.hiddenPropName = "msHidden", r.visibilityChangeEventName = "msvisibilitychange") : void 0 !== document.webkitHidden && (r.hiddenPropName = "webkitHidden", r.visibilityChangeEventName = "webkitvisibilitychange"), document.addEventListener(r.visibilityChangeEventName, function () { document[r.hiddenPropName] ? r.triggerUserHasLeftPage() : r.triggerUserHasReturned() }, !1), window.addEventListener("blur", function () { r.triggerUserHasLeftPage() }), window.addEventListener("focus", function () { r.triggerUserHasReturned() }), document.addEventListener("mousemove", function () { r.resetIdleCountdown() }), document.addEventListener("keyup", function () { r.resetIdleCountdown() }), document.addEventListener("touchstart", function () { r.resetIdleCountdown() }), window.addEventListener("scroll", function () { r.resetIdleCountdown() }), setInterval(function () { r.checkState() }, r.checkStateRateMs) }, websocket: void 0, websocketHost: void 0, setUpWebsocket: function (e) { if (window.WebSocket && e) { var t = e.websocketHost; try { r.websocket = new WebSocket(t), window.onbeforeunload = function () { r.sendCurrentTime(e.appId) }, r.websocket.onopen = function () { r.sendInitWsRequest(e.appId) }, r.websocket.onerror = function (e) { console && console.log("Error occurred in websocket connection: " + e) }, r.websocket.onmessage = function (e) { console && console.log(e.data) } } catch (e) { console && console.error("Failed to connect to websocket host.  Error:" + e) } } return this }, websocketSend: function (e) { r.websocket.send(JSON.stringify(e)) }, sendCurrentTime: function (e) { var t = { type: "INSERT_TIME", appId: e, timeOnPageMs: r.getTimeOnCurrentPageInMilliseconds(), pageName: r.currentPageName }; r.websocketSend(t) }, sendInitWsRequest: function (e) { var t = { type: "INIT", appId: e }; r.websocketSend(t) }, initialize: function (e) { var t = r.idleTimeoutMs || 30, n = r.currentPageName || "default-page-name", i = void 0, s = void 0; e && (t = e.idleTimeoutInSeconds || t, n = e.currentPageName || n, i = e.websocketOptions, s = e.initialStartTime), r.setIdleDurationInSeconds(t).setCurrentPageName(n).setUpWebsocket(i).listenForVisibilityEvents(), r.startTimer(void 0, s) } }; return r }, "undefined" != typeof module && module.exports ? module.exports = t() : "function" == typeof define && define.amd ? define([], function () { return e.TimeMe = t() }) : e.TimeMe = t() }).call(this);
function displayEmoji(){jQuery(this).text(function(r){for(var e=[],t=0,i=0;t<r.length;){var o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){var a=r[t++];e[i++]=String.fromCharCode((31&o)<<6|63&a)}else if(o>239&&o<365){var n=((7&o)<<18|(63&(a=r[t++]))<<12|(63&(f=r[t++]))<<6|63&r[t++])-65536;e[i++]=String.fromCharCode(55296+(n>>10)),e[i++]=String.fromCharCode(56320+(1023&n))}else{a=r[t++];var f=r[t++];e[i++]=String.fromCharCode((15&o)<<12|(63&a)<<6|63&f)}}return e.join("")}(JSON.parse(jQuery(this).attr("data-emoji-bytes"))))}
TimeMe.initialize({
  currentPageName: "task",
  idleTimeoutInSeconds: 30
});

$(document).ready(function() {
  $('.ui.accordion').accordion();
  $('.ui.dropdown').dropdown({
    fullTextSearch: true
  });
  $('.ui.clearable.dropdown').dropdown({
    fullTextSearch: true,
    clearable: true
  });

  $('span.emoji-bytes').each(displayEmoji);

  if ($('#action-value').text() == "safe") {
    $('#action-subheader').text("Safe Action")
  } else {
    $('#action-subheader').text("Unsafe Action").attr('style', 'color: red;')
  }

  var ckList = [];
  
  try {
    ckList = JSON.parse($('#ck-list').text().replaceAll('"', '').replaceAll("'", '"').replaceAll("#squote#", "'"));
  } catch(e) {}

  ckList.forEach(function(ck, index) {
    let head = $('<span>').addClass('kg-head').text(ck["head"]);
    let tail = $('<span>').addClass('kg-tail').text(ck["tail"]);
    let knowledge = $('<span>').addClass('kg-relation').append(head.clone()).append('&nbsp;'+ck["relation"]+'&nbsp;').append(tail.clone());
    $('#ck-list-container').append(knowledge.clone());
    $('#ck-list-container').append($('<br>')).append($('<br>'));
    let item = $('<div>').addClass('item').attr('data-value', ck["id"]);
    item.append(knowledge.clone());
    for (let i=1; i<=3; i++) {
      $('#alt-target'+i+'-ck-container .menu').append(item.clone());
    }
  });

  var wsOptions = [];
  
  try {
    wsOptions = JSON.parse($('#ws-options').text().replaceAll('"', '').replaceAll("'", '"').replaceAll("#squote#", "'"));
  } catch(e) {}

  wsOptions.forEach(function(option, index) {
    let label = $('<label>').append(option["text"]);
    let input = $('<input>').attr('type', 'checkbox').attr('name', 'ws-option'+(index+1)).attr('id', 'ws-option'+(index+1)).attr('value', option["id"]);
    let checkbox = $('<div>').addClass('ui checkbox').append(input.clone()).append(label.clone());
    $('#ws-options-container').append(checkbox.clone());
    $('#ws-options-container').append($('<br>')).append($('<br>'));
  });

  let label = $('<label>').append('<strong>None of the above.</strong>');
  let input = $('<input>').attr('type', 'checkbox').attr('name', 'ws-option-none').attr('id', 'ws-option-none').attr('value', 1);
  let checkbox = $('<div>').addClass('ui checkbox').append(input.clone()).append(label.clone());
  $('#ws-options-container').append(checkbox.clone());

  $('#ws-suggestion-container').hide();
  $('#ws-option-none').on('change', function() {
    if ($(this).is(':checked')) {
      $('#ws-suggestion-container').show();
      $('#alt-target1').attr('required', true);
    } else {
      $('#ws-suggestion-container').hide();
      $('#alt-target1').attr('required', false);
    }
  });

  for (let i=1; i<=1; i++) {
    $('#alt-target'+i+'-ck-error').hide();
    $('#alt-target'+i+'-ck').on('change', function() {
      $('#alt-target'+i+'-ck-error').hide();
    });
  }

  $('#alt-target2-container').hide();
  $('#alt-target3-container').hide();

  $('#add-target-btn').click(function() {
    if ($('#alt-target2-container').is(':hidden')) {
      $('#alt-target2-container').show();
    } else if ($('#alt-target3-container').is(':hidden')) {
      $('#alt-target3-container').show();
      $('#add-target-btn').attr("disabled", true);
    }
  })

  $('#submitButton').click(function () {
    try {
      var selectedOption = $('#ws-option-none').is(':checked');
      for (let i = 1; i <= wsOptions.length; i++) {
        if ($('#ws-option'+i).is(':checked')) {
          selectedOption = true;
          break;
        }
      }

      if (!selectedOption) {
        return false;
      }

      if ($('#ws-option-none').is(':checked')) {
        if ($('#alt-target1-ck').val() == "") {
          $('#alt-target1-ck-error').show();
          return false;
        }
      }

      $('input[name=ee]').attr('value', TimeMe.getTimeOnCurrentPageInSeconds());
    } catch {
    }
    return true;
  });
});
</script>
</body>
</html>
